{"version":3,"file":"vote.bundle.js","sources":["../src/vote.js"],"sourcesContent":["import { createStore, type Store } from 'ui.vue3.vuex';\nimport { ChatType } from 'im.v2.const';\n\nimport { VoteModel } from 'vote.store.vote';\nimport { VotePullHandler } from 'vote.provider.pull';\n\nexport class VoteApplication\n{\n\tstatic instance: VoteApplication;\n\tstore: Store;\n\n\tstatic init(): VoteApplication\n\t{\n\t\treturn VoteApplication.getInstance();\n\t}\n\n\tstatic getInstance(): VoteApplication\n\t{\n\t\tif (!VoteApplication.instance)\n\t\t{\n\t\t\tVoteApplication.instance = new VoteApplication();\n\t\t}\n\n\t\treturn VoteApplication.instance;\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.createStore();\n\t\tthis.initPull();\n\t}\n\n\tcreateStore(): void\n\t{\n\t\tthis.store = createStore({\n\t\t\tmodules: {\n\t\t\t\tvote: {\n\t\t\t\t\tnamespaced: true,\n\t\t\t\t\t...VoteModel,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tgetStore(): Store\n\t{\n\t\treturn this.store;\n\t}\n\n\tinitPull(): void\n\t{\n\t\tthis.pullClient = BX.PULL;\n\t\tif (!this.pullClient)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.pullClient.subscribe(new VotePullHandler({ store: this.store }));\n\t}\n\n\tstatic canCreateVoteInChat(currentChatType: string): boolean\n\t{\n\t\tconst availableChatTypes = [\n\t\t\tChatType.chat,\n\t\t\tChatType.open,\n\t\t\tChatType.general,\n\t\t\tChatType.call,\n\t\t\tChatType.crm,\n\t\t\tChatType.sonetGroup,\n\t\t\tChatType.calendar,\n\t\t\tChatType.tasks,\n\t\t\tChatType.mail,\n\t\t\tChatType.generalChannel,\n\t\t\tChatType.channel,\n\t\t\tChatType.openChannel,\n\t\t\tChatType.collab,\n\t\t];\n\n\t\treturn availableChatTypes.includes(currentChatType);\n\t}\n}\n"],"names":["VoteApplication","init","getInstance","instance","constructor","createStore","initPull","store","modules","vote","namespaced","VoteModel","getStore","pullClient","BX","PULL","subscribe","VotePullHandler","canCreateVoteInChat","currentChatType","availableChatTypes","ChatType","chat","open","general","call","crm","sonetGroup","calendar","tasks","mail","generalChannel","channel","openChannel","collab","includes"],"mappings":";;;;;CAMO,MAAMA,eAAe,CAC5B;GAIC,OAAOC,IAAI,GACX;KACC,OAAOD,eAAe,CAACE,WAAW,EAAE;;GAGrC,OAAOA,WAAW,GAClB;KACC,IAAI,CAACF,eAAe,CAACG,QAAQ,EAC7B;OACCH,eAAe,CAACG,QAAQ,GAAG,IAAIH,eAAe,EAAE;;KAGjD,OAAOA,eAAe,CAACG,QAAQ;;GAGhCC,WAAW,GACX;KACC,IAAI,CAACC,WAAW,EAAE;KAClB,IAAI,CAACC,QAAQ,EAAE;;GAGhBD,WAAW,GACX;KACC,IAAI,CAACE,KAAK,GAAGF,wBAAW,CAAC;OACxBG,OAAO,EAAE;SACRC,IAAI,EAAE;WACLC,UAAU,EAAE,IAAI;WAChB,GAAGC;;;MAGL,CAAC;;GAGHC,QAAQ,GACR;KACC,OAAO,IAAI,CAACL,KAAK;;GAGlBD,QAAQ,GACR;KACC,IAAI,CAACO,UAAU,GAAGC,EAAE,CAACC,IAAI;KACzB,IAAI,CAAC,IAAI,CAACF,UAAU,EACpB;OACC;;KAGD,IAAI,CAACA,UAAU,CAACG,SAAS,CAAC,IAAIC,kCAAe,CAAC;OAAEV,KAAK,EAAE,IAAI,CAACA;MAAO,CAAC,CAAC;;GAGtE,OAAOW,mBAAmB,CAACC,eAAuB,EAClD;KACC,MAAMC,kBAAkB,GAAG,CAC1BC,oBAAQ,CAACC,IAAI,EACbD,oBAAQ,CAACE,IAAI,EACbF,oBAAQ,CAACG,OAAO,EAChBH,oBAAQ,CAACI,IAAI,EACbJ,oBAAQ,CAACK,GAAG,EACZL,oBAAQ,CAACM,UAAU,EACnBN,oBAAQ,CAACO,QAAQ,EACjBP,oBAAQ,CAACQ,KAAK,EACdR,oBAAQ,CAACS,IAAI,EACbT,oBAAQ,CAACU,cAAc,EACvBV,oBAAQ,CAACW,OAAO,EAChBX,oBAAQ,CAACY,WAAW,EACpBZ,oBAAQ,CAACa,MAAM,CACf;KAED,OAAOd,kBAAkB,CAACe,QAAQ,CAAChB,eAAe,CAAC;;CAErD;;;;;;;;"}