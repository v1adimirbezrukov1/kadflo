{"version":3,"file":"vote.bundle.js","sources":["../src/components/helpers/helpers.js","../src/components/vote-question/vote-question.js","../src/components/button-area/button-area.js","../src/components/popup/popup.js","../src/vote.js"],"sourcesContent":["import { Loc } from 'main.core';\n\nexport const getMessage = (phraseCode: string): string => {\n\treturn Loc.getMessage(phraseCode);\n};\n\nexport const getMessageWithCount = (phraseCode: string, counter: number): string => {\n\treturn Loc.getMessagePlural(phraseCode, counter, {\n\t\t'#COUNT#': counter,\n\t});\n};\n","import 'ui.icon-set.animated';\n\nimport { VoteApplication } from 'vote.application';\n\nimport type { JsonObject } from 'main.core';\nimport type { AnswerCollectionType } from 'vote.store.vote';\nimport type { AnswersSelectedEvent, FormattedAnswersType } from '../../type';\n\nimport './style.css';\n\n// @vue/component\nexport const VoteQuestion = {\n\tname: 'VoteQuestion',\n\tprops: {\n\t\tcontextId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\t/** @type {FormattedQuestionType} */\n\t\tquestion: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\t/** @type {FormattedAnswersType} */\n\t\tanswers: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisUserVoted: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCompleted: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['answersSelected'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tselectedRadioBtn: null,\n\t\t\tselectedCheckboxes: [],\n\t\t};\n\t},\n\tcomputed: {\n\t\tanswersCollection(): AnswerCollectionType\n\t\t{\n\t\t\treturn this.app.getStore().getters['vote/getAnswerCollection'];\n\t\t},\n\t\tformattedAnswers(): FormattedAnswersType\n\t\t{\n\t\t\tconst formattedAnswers = {};\n\n\t\t\tObject.keys(this.answers).forEach((key) => {\n\t\t\t\tconst answer = this.answers[key];\n\t\t\t\tconst storeAnswer = this.answersCollection[answer.id] || {};\n\n\t\t\t\tformattedAnswers[key] = {\n\t\t\t\t\t...answer,\n\t\t\t\t\tcounter: storeAnswer.counter || 0,\n\t\t\t\t\tpercent: storeAnswer.percent,\n\t\t\t\t};\n\t\t\t});\n\n\t\t\treturn formattedAnswers;\n\t\t},\n\t\tgetCurrentUserVotes(): number[]\n\t\t{\n\t\t\treturn this.app.getStore().getters['vote/getCurrentUserVotes'][this.question.id] || [];\n\t\t},\n\t\tcanShowResults(): boolean\n\t\t{\n\t\t\treturn this.isUserVoted || this.isCompleted;\n\t\t},\n\t},\n\twatch: {\n\t\tisLoading(newValue): void\n\t\t{\n\t\t\tif (newValue)\n\t\t\t{\n\t\t\t\tthis.selectedCheckboxes = this.getCurrentUserVotes || [];\n\t\t\t\tthis.selectedRadioBtn = this.getCurrentUserVotes[0];\n\t\t\t}\n\t\t},\n\t\tisUserVoted(voted: boolean): void\n\t\t{\n\t\t\tif (voted)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectedCheckboxes = [];\n\t\t\tthis.selectedRadioBtn = null;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.app = VoteApplication.init();\n\t},\n\tmethods:\n\t{\n\t\tradioChanged(): void\n\t\t{\n\t\t\tthis.emitAnswersSelectedWithValue([this.selectedRadioBtn]);\n\t\t},\n\t\tcheckboxChanged(): void\n\t\t{\n\t\t\tthis.emitAnswersSelectedWithValue(this.selectedCheckboxes);\n\t\t},\n\t\temitAnswersSelectedWithValue(answerIds: number[]): void\n\t\t{\n\t\t\tconst eventData: AnswersSelectedEvent = {\n\t\t\t\tquestionId: this.question.id,\n\t\t\t\tanswerIds,\n\t\t\t};\n\t\t\tthis.$emit('answersSelected', eventData);\n\t\t},\n\t\thasCurrentUserVote(answerId: number): boolean\n\t\t{\n\t\t\tif (this.canShowResults)\n\t\t\t{\n\t\t\t\treturn this.app.getStore().getters['vote/hasCurrentUserVote'](this.question.id, answerId);\n\t\t\t}\n\n\t\t\treturn this.selectedCheckboxes.includes(answerId);\n\t\t},\n\t\tgetUniqueAnswerId(answerId: number): string\n\t\t{\n\t\t\treturn `vote-answer-${answerId}-${this.contextId}`;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"vote__question\">\n\t\t\t<div class=\"vote__question-text\">{{ question.question }}</div>\n\t\t</div>\n\t\t<div :class=\"['vote__answers', { '--voted': canShowResults }]\">\n\t\t\t<div v-for=\"(answer, answerKey) in formattedAnswers\" \n\t\t\t\t :key=\"answerKey\"\n\t\t\t\t :class=\"['vote__answer', { '--selected': hasCurrentUserVote(answer.id) }]\"\n\t\t\t>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"vote__answer-select\"\n\t\t\t\t\tv-if=\"!isLoading && !question.isMultiple\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tv-model=\"selectedRadioBtn\"\n\t\t\t\t\t:value=\"answer.id\"\n\t\t\t\t\t:id=\"getUniqueAnswerId(answer.id)\"\n\t\t\t\t\t@change=\"radioChanged\"\n\t\t\t\t/>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"vote__answer-select --checkbox\"\n\t\t\t\t\tv-if=\"!isLoading && question.isMultiple\"\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\tv-model=\"selectedCheckboxes\"\n\t\t\t\t\t:value=\"answer.id\"\n\t\t\t\t\t:id=\"getUniqueAnswerId(answer.id)\"\n\t\t\t\t\t@change=\"checkboxChanged\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"vote__progress-bar\">\n\t\t\t\t\t<label class='vote__answer-text' :for=\"getUniqueAnswerId(answer.id)\">{{ answer.message }}</label>\n\t\t\t\t\t<div v-if=\"canShowResults\" class=\"vote__answer-percent\">\n\t\t\t\t\t\t<span>{{ answer.percent }}</span>\n\t\t\t\t\t\t%\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"canShowResults\" class=\"vote__progress-bar-fill\"\n\t\t\t\t\t\t :style=\"{\n\t\t\t\t\t\twidth: answer.percent + '%'\n\t\t\t\t\t  }\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { VoteApplication } from 'vote.application';\nimport { getMessage, getMessageWithCount } from '../helpers/helpers';\n\nimport { VoteQuestion } from '../vote-question/vote-question';\n\nimport './style.css';\n\nconst ButtonType = Object.freeze({\n\tvote: 'vote',\n\tdisable: 'disable',\n\tshowResults: 'show',\n});\n\n// @vue/component\nexport const ButtonArea = {\n\tname: 'ButtonArea',\n\tcomponents: { VoteQuestion },\n\tprops: {\n\t\t/** @type {FormattedQuestionType} */\n\t\tquestion: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tisUserVoted: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisCompleted: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tisBtnActive: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['onClickVoteButton', 'showResults'],\n\tcomputed:\n\t{\n\t\tisMultipleQuestion(): boolean\n\t\t{\n\t\t\tif (this.isLoading)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.app.getStore().getters['vote/getQuestionCollection'][this.question.id].isMultiple;\n\t\t},\n\t\tbuttonType(): string\n\t\t{\n\t\t\tif (this.isUserVoted || this.isCompleted)\n\t\t\t{\n\t\t\t\treturn ButtonType.showResults;\n\t\t\t}\n\n\t\t\tif (this.isMultipleQuestion)\n\t\t\t{\n\t\t\t\treturn ButtonType.vote;\n\t\t\t}\n\n\t\t\treturn ButtonType.disable;\n\t\t},\n\t\tisBtnAvailableToVote(): boolean\n\t\t{\n\t\t\treturn this.isBtnActive && this.buttonType === ButtonType.vote;\n\t\t},\n\t\tbuttonClass(): string\n\t\t{\n\t\t\treturn `--${this.buttonType}`;\n\t\t},\n\t\tgetSummaryText(): string\n\t\t{\n\t\t\tif (this.question.totalCounter > 0)\n\t\t\t{\n\t\t\t\treturn getMessageWithCount('VOTE_SUMMARY_COUNT', this.question.totalCounter);\n\t\t\t}\n\n\t\t\treturn getMessage('VOTE_SUMMARY_NO_VOTES');\n\t\t},\n\t\tgetButtonText(): string\n\t\t{\n\t\t\tif (this.isUserVoted || !this.isMultipleQuestion || this.isCompleted)\n\t\t\t{\n\t\t\t\treturn this.getSummaryText;\n\t\t\t}\n\n\t\t\treturn getMessage('VOTE_BUTTON');\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.app = VoteApplication.init();\n\t},\n\tmethods: {\n\t\thandleButtonClick(): void\n\t\t{\n\t\t\tif (this.buttonType === ButtonType.vote)\n\t\t\t{\n\t\t\t\tthis.$emit('onClickVoteButton');\n\t\t\t}\n\t\t\telse if (this.buttonType === ButtonType.showResults)\n\t\t\t{\n\t\t\t\tthis.$emit('showResults');\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"vote-display-btn-wrapper\">\n\t\t\t<button class=\"vote-display-btn\"\n\t\t\t\t\t@click=\"handleButtonClick\"\n\t\t\t\t\t:class=\"[buttonClass, { '--active': isBtnAvailableToVote }]\"\n\t\t\t\t\ttype=\"button\"\n\t\t\t>\n\t\t\t\t{{ getButtonText }}\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","import { PopupOptions } from 'main.popup';\n\nimport { Popup } from 'ui.vue3.components.popup';\nimport { getMessage } from '../helpers/helpers';\n\nimport './style.css';\n\n// @vue/component\nexport const VotePopup = {\n\tname: 'VotePopup',\n\tcomponents: { Popup },\n\temits: ['confirm', 'cancel'],\n\tcomputed:\n\t{\n\t\tgetMessage: () => getMessage,\n\t\tpopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 374,\n\t\t\t\tclassName: 'vote-display__popup',\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\t:options=\"popupOptions\" @close=\"$emit('cancel')\"\n\t\t\tid=\"vote-display-popup\"\n\t\t>\n\t\t\t<div class=\"vote-display__popup-content\">\n\t\t\t\t<div class=\"vote-display__popup-title\">\n\t\t\t\t\t{{ getMessage('VOTE_POPUP_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"vote-display__popup-text\">\n\t\t\t\t\t{{ getMessage('VOTE_POPUP_TEXT') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"vote-display__popup-footer\">\n\t\t\t\t<button class=\"vote-display__popup-btn --complete\" @click=\"$emit('confirm')\">\n\t\t\t\t\t{{ getMessage('VOTE_POPUP_BTN_COMPLETE') }}\n\t\t\t\t</button>\n\t\t\t\t<button class=\"vote-display__popup-btn --cancel\" @click=\"$emit('cancel')\">\n\t\t\t\t\t{{ getMessage('VOTE_POPUP_BTN_CANCEL') }}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Text, Type, type JsonObject } from 'main.core';\nimport { UI } from 'ui.notification';\n\nimport { VoteApplication } from 'vote.application';\nimport { ImVoteService } from 'vote.provider.service';\nimport { Loader } from 'vote.component.loader';\nimport type { QuestionCollectionType, VoteCollectionType, VoteElementState } from 'vote.store.vote';\n\nimport { ButtonArea } from './components/button-area/button-area';\nimport { VotePopup } from './components/popup/popup';\nimport { getMessage } from './components/helpers/helpers';\nimport { VoteQuestion } from './components/vote-question/vote-question';\n\nimport './vote.css';\n\nimport type { VoteInitQuestion, FormattedQuestionType, AnswersSelectedEvent } from './type';\n\nconst ANONYMOUS_VOTE = 2;\n\n// @vue/component\nexport const VoteDisplay = {\n\tname: 'VoteDisplay',\n\tcomponents:\n\t{\n\t\tVoteQuestion,\n\t\tButtonArea,\n\t\tLoader,\n\t\tVotePopup,\n\t},\n\tprops:\n\t{\n\t\tvoteItem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tentityId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tentityType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcontextId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['vote', 'revokeVote', 'copyLink'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisLoading: true,\n\t\t\tisShowPopup: false,\n\t\t\tquestionAnswers: {},\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tfirstQuestion(): Record<string, VoteInitQuestion>\n\t\t{\n\t\t\tconst firstKey = Object.keys(this.voteItem.data?.questions)[0];\n\n\t\t\treturn this.voteItem.data?.questions[firstKey];\n\t\t},\n\t\tquestionCollection(): QuestionCollectionType\n\t\t{\n\t\t\treturn this.app.getStore().getters['vote/getQuestionCollection'];\n\t\t},\n\t\tvoteCollection(): VoteCollectionType\n\t\t{\n\t\t\treturn this.app.getStore().getters['vote/getVoteCollection'];\n\t\t},\n\t\tcurrentVote(): VoteElementState\n\t\t{\n\t\t\treturn this.voteCollection[this.voteItem.id];\n\t\t},\n\t\tformattedQuestion(): FormattedQuestionType\n\t\t{\n\t\t\tconst storeQuestion = this.questionCollection[this.firstQuestion.id] || {};\n\n\t\t\treturn {\n\t\t\t\t...this.firstQuestion,\n\t\t\t\ttotalCounter: storeQuestion.totalCounter,\n\t\t\t\tisMultiple: storeQuestion.isMultiple,\n\t\t\t};\n\t\t},\n\t\tisUserVoted(): boolean\n\t\t{\n\t\t\tif (this.isLoading)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.currentVote.isVoted;\n\t\t},\n\t\tcanRevoke(): boolean\n\t\t{\n\t\t\tif (this.isLoading)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.currentVote.canRevoke && this.isUserVoted && !this.isCompleted;\n\t\t},\n\t\tcanEdit(): boolean\n\t\t{\n\t\t\tif (this.isLoading)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.currentVote.canEdit;\n\t\t},\n\t\tisAnonymous(): boolean\n\t\t{\n\t\t\treturn this.voteItem.data?.anonymity === ANONYMOUS_VOTE;\n\t\t},\n\t\tisCompleted(): boolean\n\t\t{\n\t\t\tif (this.isLoading)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.currentVote.isCompleted;\n\t\t},\n\t\thasSelectedAnswers(): boolean\n\t\t{\n\t\t\treturn Type.isArrayFilled(this.questionAnswers[this.firstQuestion.id]);\n\t\t},\n\t\tgetVoteTypeText(): string\n\t\t{\n\t\t\treturn this.isAnonymous ? getMessage('VOTE_ANONYMOUS') : getMessage('VOTE_PUBLIC');\n\t\t},\n\t\tgetCompletionVoteText(): string\n\t\t{\n\t\t\treturn getMessage('VOTE_NOTICE_COMPLETED');\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.app = VoteApplication.init();\n\t\tthis.voteService = new ImVoteService(this.entityType, this.entityId);\n\t},\n\tasync mounted(): void\n\t{\n\t\tthis.loadAttach();\n\t},\n\tmethods:\n\t{\n\t\tnotifyAjaxError(ex): void\n\t\t{\n\t\t\tif (Type.isObject(ex) && Type.isArrayFilled(ex.errors))\n\t\t\t{\n\t\t\t\tconst message = ex?.errors[0]?.message ?? 'Unexpected error';\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Text.encode(message),\n\t\t\t\t\tautoHideDelay: 4000,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconsole.error(ex);\n\t\t\t}\n\t\t},\n\t\tasync answersSelected(event: AnswersSelectedEvent): void\n\t\t{\n\t\t\tthis.questionAnswers[event.questionId] = event.answerIds;\n\t\t\tconst currentQuestion = this.questionCollection[event.questionId];\n\t\t\tif (currentQuestion.isMultiple || this.isUserVoted)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvoid this.submitVote();\n\t\t},\n\t\tasync submitVote(): Promise<void>\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.app.getStore().dispatch('vote/setUserVoted', {\n\t\t\t\t\tvoteId: this.currentVote.id,\n\t\t\t\t});\n\t\t\t\tawait this.voteService.sendVote(this.questionAnswers);\n\t\t\t\tthis.$emit('vote');\n\t\t\t\tthis.questionAnswers = {};\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tconsole.error('Vote: submit vote error', e);\n\t\t\t\tthis.app.getStore().dispatch('vote/resetUserVoted', {\n\t\t\t\t\tvoteId: this.currentVote.id,\n\t\t\t\t});\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: getMessage('VOTE_NOTICE_ERROR_MESSAGE_SUBMIT'),\n\t\t\t\t\tautoHideDelay: 4000,\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.isLoading = false;\n\t\t},\n\t\tonClickVoteButton(): void\n\t\t{\n\t\t\tif (Type.isArrayFilled(this.questionAnswers[this.formattedQuestion.id]))\n\t\t\t{\n\t\t\t\tthis.submitVote();\n\t\t\t}\n\t\t},\n\t\tasync showResults(): void\n\t\t{\n\t\t\tBX.SidePanel.Instance.open(this.currentVote.resultUrl, {\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: 480,\n\t\t\t\tcopyLinkLabel: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonOpen: ({ slider }: BX.SidePanel.Event) => {\n\t\t\t\t\t\tconst copyLink = slider.getCopyLinkLabel();\n\t\t\t\t\t\tcopyLink.setOnclick(() => {\n\t\t\t\t\t\t\tthis.$emit('copyLink');\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tasync loadAttach(): void\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait this.voteService.load();\n\t\t\t\tthis.isLoading = false;\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tthis.notifyAjaxError(e);\n\t\t\t\t// @TODO add error state;\n\t\t\t}\n\t\t},\n\t\tasync completeVote(): void\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.app.getStore().dispatch('vote/setVoteCompleted', {\n\t\t\t\t\tvoteId: this.currentVote.id,\n\t\t\t\t});\n\t\t\t\tawait this.voteService.completeVote();\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tconsole.error('Vote: complete vote error', e);\n\n\t\t\t\tthis.app.getStore().dispatch('vote/resetVoteCompleted', {\n\t\t\t\t\tvoteId: this.currentVote.id,\n\t\t\t\t});\n\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: getMessage('VOTE_NOTICE_ERROR_MESSAGE_COMPLETE'),\n\t\t\t\t\tautoHideDelay: 4000,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonCompetePopupConfirm(): void\n\t\t{\n\t\t\tthis.isShowPopup = false;\n\t\t\tthis.completeVote();\n\t\t},\n\t\tonCompetePopupCancel(): void\n\t\t{\n\t\t\tthis.isShowPopup = false;\n\t\t},\n\t\tasync recallVote(): void\n\t\t{\n\t\t\tconst previousSelectedAnswers = this.app.getStore().getters['vote/getCurrentUserVotes'][this.firstQuestion.id];\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.app.getStore().dispatch('vote/clearVotes', {\n\t\t\t\t\tquestionId: this.firstQuestion.id,\n\t\t\t\t\tvoteId: this.currentVote.id,\n\t\t\t\t});\n\t\t\t\tthis.app.getStore().dispatch('vote/resetUserVoted', {\n\t\t\t\t\tvoteId: this.currentVote.id,\n\t\t\t\t});\n\t\t\t\tawait this.voteService.revokeVote();\n\t\t\t\tthis.$emit('revokeVote');\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tconsole.error('Vote: recall vote error', e);\n\t\t\t\tthis.app.getStore().dispatch('vote/updateCurrentUserVotes', {\n\t\t\t\t\tquestionId: this.firstQuestion.id,\n\t\t\t\t\tanswerIds: previousSelectedAnswers,\n\t\t\t\t});\n\t\t\t\tthis.app.getStore().dispatch('vote/setUserVoted', {\n\t\t\t\t\tvoteId: this.currentVote.id,\n\t\t\t\t});\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: getMessage('VOTE_NOTICE_ERROR_MESSAGE_REVOKE'),\n\t\t\t\t\tautoHideDelay: 4000,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t\t<form class=\"vote-display\">\n\t\t\t\t<div class=\"vote-display-inner\">\n\t\t\t\t\t<VoteQuestion\n\t\t\t\t\t\t:key=\"formattedQuestion.id\"\n\t\t\t\t\t\t:contextId=\"contextId\"\n\t\t\t\t\t\t:isLoading=\"isLoading\"\n\t\t\t\t\t\t:question=\"formattedQuestion\"\n\t\t\t\t\t\t:isUserVoted=\"isUserVoted\"\n\t\t\t\t\t\t:isCompleted=\"isCompleted\"\n\t\t\t\t\t\t:answers=\"formattedQuestion.answers\"\n\t\t\t\t\t\t@answersSelected=\"answersSelected\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"vote-display-bottom-container\">\n\t\t\t\t\t\t<div v-if=\"isLoading\" class=\"vote-display__loader\">\n\t\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ButtonArea v-else\n\t\t\t\t\t\t\t:question=\"formattedQuestion\"\n\t\t\t\t\t\t\t:isLoading=\"isLoading\"\n\t\t\t\t\t\t\t:isUserVoted=\"isUserVoted\"\n\t\t\t\t\t\t\t:isCompleted=\"isCompleted\"\n\t\t\t\t\t\t\t:isBtnActive=\"hasSelectedAnswers\"\n\t\t\t\t\t\t\t@onClickVoteButton=\"onClickVoteButton\"\n\t\t\t\t\t\t\t@showResults=\"showResults\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div class=\"vote__notice\">\n\t\t\t\t\t\t\t<span class=\"vote__notice-text\">{{ getVoteTypeText }}</span>\n\t\t\t\t\t\t\t<span v-if=\"isCompleted\" class=\"vote__notice-text\">{{ getCompletionVoteText }}</span>\n\t\t\t\t\t\t</div>\n\n\t\t<!--\t\t\t\ttemporary button for testing-->\n\t\t\t\t\t\t<div style=\"height:22px;display:none;\">\n\t\t\t\t\t\t\t<button v-if=\"canRevoke\" @click=\"recallVote\" type=\"button\">Переголосовать</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"height:22px;display:none;\">\n\t\t\t\t\t\t\t<button  v-if=\"!isCompleted && canEdit\" @click=\"isShowPopup = true\" type=\"button\">Завершить</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t\t<VotePopup \n\t\t\t\tv-if=\"isShowPopup\" \n\t\t\t\t@confirm=\"onCompetePopupConfirm\"\n\t\t\t\t@cancel=\"onCompetePopupCancel\"\n\t\t\t/>\n\t`,\n};\n"],"names":["getMessage","phraseCode","Loc","getMessageWithCount","counter","getMessagePlural","VoteQuestion","name","props","contextId","type","String","required","isLoading","Boolean","default","question","Object","answers","isUserVoted","isCompleted","emits","data","selectedRadioBtn","selectedCheckboxes","computed","answersCollection","app","getStore","getters","formattedAnswers","keys","forEach","key","answer","storeAnswer","id","percent","getCurrentUserVotes","canShowResults","watch","newValue","voted","created","VoteApplication","init","methods","radioChanged","emitAnswersSelectedWithValue","checkboxChanged","answerIds","eventData","questionId","$emit","hasCurrentUserVote","answerId","includes","getUniqueAnswerId","template","ButtonType","freeze","vote","disable","showResults","ButtonArea","components","isBtnActive","isMultipleQuestion","isMultiple","buttonType","isBtnAvailableToVote","buttonClass","getSummaryText","totalCounter","getButtonText","handleButtonClick","VotePopup","Popup","popupOptions","width","className","ANONYMOUS_VOTE","VoteDisplay","Loader","voteItem","entityId","Number","entityType","isShowPopup","questionAnswers","firstQuestion","firstKey","questions","questionCollection","voteCollection","currentVote","formattedQuestion","storeQuestion","isVoted","canRevoke","canEdit","isAnonymous","anonymity","hasSelectedAnswers","Type","isArrayFilled","getVoteTypeText","getCompletionVoteText","voteService","ImVoteService","mounted","loadAttach","notifyAjaxError","ex","isObject","errors","message","UI","Notification","Center","notify","content","Text","encode","autoHideDelay","console","error","answersSelected","event","currentQuestion","submitVote","dispatch","voteId","sendVote","e","BX","onClickVoteButton","SidePanel","Instance","open","resultUrl","cacheable","copyLinkLabel","events","onOpen","slider","copyLink","getCopyLinkLabel","setOnclick","load","completeVote","onCompetePopupConfirm","onCompetePopupCancel","recallVote","previousSelectedAnswers","revokeVote"],"mappings":"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"}