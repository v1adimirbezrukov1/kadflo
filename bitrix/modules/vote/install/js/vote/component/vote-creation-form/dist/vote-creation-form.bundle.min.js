this.BX=this.BX||{};this.BX.Vote=this.BX.Vote||{};(function(t,e,n,r,o,i){"use strict";var s=2;var a={mounted:function t(e){o.Event.bind(e,"input",(function(){o.Dom.style(e,"height",0);o.Dom.style(e,"height","".concat(e.scrollHeight+s,"px"))}))}};var c={name:"voteAnswer",directives:{resize:a},props:{id:{type:String,required:true},removable:{type:Boolean,required:true}},emits:["removeAnswer","changeAnswer"],data:function t(){return{answerText:""}},methods:{removeAnswer:function t(){this.$emit("removeAnswer")},changeAnswer:function t(){this.$emit("changeAnswer",this.answerText)}},template:'\n\t\t<div class="vote-creation-form__answer" :data-id="id">\n\t\t\t<div class="vote-creation-form__answer_dnd-icon ui-icon-set --more-points"></div>\n\t\t\t<div class="ui-ctl ui-ctl-textarea ui-ctl-no-resize">\n\t\t\t\t<textarea\n\t\t\t\t\tmaxlength="100"\n\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\tv-resize\n\t\t\t\t\tv-model.trim="answerText"\n\t\t\t\t\t@input="changeAnswer"\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if="removable"\n\t\t\t\tclass="vote-creation-form__answer_trash"\n\t\t\t\t@click="removeAnswer"\n\t\t\t>\n\t\t\t</div>\n\t\t</div>\n\t'};var u={methods:{loc:function t(e){return this.$Bitrix.Loc.getMessage(e)}}};var l;var d=function t(e,n){o.Dom.style(e,"transform","translate3d(0, ".concat(n,"px, 0)"))};var f=function t(e,n,r,o){var i=e.offsetTop+o;if(i<0){d(r,0)}else if(i+r.offsetHeight>n.offsetHeight){d(r,n.offsetHeight-r.offsetHeight)}else{d(r,i)}};var v=function t(e){var n=e.cloneNode(true);o.Dom.addClass(n,"vote-creation-form__answer_ghost");d(n,e.offsetTop);o.Dom.append(n,e.parentElement);return n};var h=function t(e){var n=o.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['<div class="vote-creation-form__answer_position-pointer" hidden></div>'])));o.Dom.append(n,e);return n};var p=function t(e,n){var r=e.target,i=e.currentTarget;if(!o.Dom.hasClass(r,"vote-creation-form__answer_dnd-icon")){return}var s=0;var a=null;var c=window.scrollY;var u=8;var l=r.closest(".vote-creation-form__answer");var p=v(l);var m=h(i);var w=function t(e){var n=e.movementY;o.Dom.style(document.body,"userSelect","none");o.Dom.style(document.body,"cursor","grabbing");o.Dom.addClass(i,"--pointer-events-disabled");s+=n;f(l,i,p,s);o.Dom.removeClass(i,"--pointer-events-disabled");var r=p.getBoundingClientRect(),c=r.x,v=r.y;var h=document.elementFromPoint(c,v);a=h===null||h===void 0?void 0:h.closest(".vote-creation-form__answer");o.Dom.addClass(i,"--pointer-events-disabled");if(!a||a===l){m.hidden=true;return}m.hidden=false;d(m,a.offsetTop-u)};var y=function t(){o.Dom.style(document.body,"userSelect","");o.Dom.style(document.body,"cursor","");o.Dom.removeClass(i,"--pointer-events-disabled");o.Event.unbind(document,"mousemove",w);o.Event.unbind(document,"mouseup",t);o.Event.unbind(document,"scroll",b);o.Dom.remove(p);o.Dom.remove(m);if(a&&a!==l){n(l.dataset.id,a.dataset.id)}};var b=function t(){var e=window.scrollY-c;c=window.scrollY;s+=e;f(l,i,p,s)};o.Event.bind(document,"mousemove",w);o.Event.bind(document,"mouseup",y);o.Event.bind(document,"scroll",b)};var m={mounted:function t(e,n){o.Event.bind(e,"mousedown",(function(t){p(t,n.value)}))}};function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var b={name:"voteQuestion",directives:{dnd:m,resize:a},components:{Answer:c},mixins:[u],props:{id:{type:String,required:true},question:{type:Object,required:true},minAnswersCount:{type:Number,required:true},maxAnswersCount:{type:Number,required:true}},emits:["addAnswer","removeAnswer","changeQuestion","validate"],data:function t(){return{questionText:""}},computed:{answersCount:function t(){return Object.keys(this.question.answers).length},isValid:function t(){var e=Object.values(this.question.answers);var n=e.filter((function(t){return t!==""}));return this.question.questionText!==""&&n.length>=this.minAnswersCount},canAddMoreAnswers:function t(){return this.answersCount<this.maxAnswersCount}},watch:{isValid:function t(){this.$emit("validate",this.isValid)}},mounted:function t(){var e=this;var n=new i.Switcher({node:this.$refs.multipleAnswersSwitcher,size:i.SwitcherSize.small,handlers:{toggled:function t(){e.$emit("changeQuestion",y(y({},e.question),{},{allowMultipleAnswers:n.checked}))}}})},methods:{changeText:function t(){var e=y(y({},this.question),{},{questionText:this.questionText});this.$emit("changeQuestion",e)},addAnswer:function t(){this.$emit("addAnswer")},removeAnswer:function t(e){this.$emit("removeAnswer",e)},changeAnswer:function t(e,n){var r=this.question.answers;var o=y(y({},this.question),{},{answers:y(y({},r),{},babelHelpers.defineProperty({},e,n))});this.$emit("changeQuestion",o)},orderAnswer:function t(e,n){var r=this.question.answers;var o=Object.keys(r).filter((function(t){return t!==e}));o.splice(o.indexOf(n),0,e);var i=o.reduce((function(t,e){t[e]=r[e];return t}),{});this.$emit("changeQuestion",y(y({},this.question),{},{answers:i}))}},template:'\n\t\t<div class="vote-creation-form__question" :data-id="id">\n\t\t\t<p class="vote-creation-form__question_label">\n\t\t\t\t{{loc(\'VOTE_QUESTION_LABEL\')}}\n\t\t\t</p>\n\t\t\t<div class="ui-ctl ui-ctl-textarea ui-ctl-no-resize">\n\t\t\t\t<textarea\n\t\t\t\t\tmaxlength="250"\n\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\tv-model.trim="questionText"\n\t\t\t\t\tv-resize\n\t\t\t\t\t@input="changeText"\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t\t<p class="vote-creation-form__question_answer-options">\n\t\t\t\t{{loc(\'VOTE_QUESTION_ANSWER_OPTIONS\')}}\n\t\t\t</p>\n\t\t\t<div\n\t\t\t\tclass="vote-creation-form__answers"\n\t\t\t\tv-dnd="orderAnswer"\n\t\t\t>\n\t\t\t\t<Answer\n\t\t\t\t\tv-for="(answer, id) in question.answers"\n\t\t\t\t\t:key="id"\n\t\t\t\t\t:id="id"\n\t\t\t\t\t:answer="answer"\n\t\t\t\t\t:removable="answersCount > minAnswersCount"\n\t\t\t\t\t@removeAnswer="removeAnswer(id)"\n\t\t\t\t\t@changeAnswer="changeAnswer(id, $event)"\n\t\t\t\t></Answer>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-if="canAddMoreAnswers"\n\t\t\t\tclass="vote-creation-form__question_add-answer"\n\t\t\t\t@click="addAnswer"\n\t\t\t>\n\t\t\t\t<div class="vote-creation-form__question_plus"></div>\n\t\t\t\t<span>{{loc(\'VOTE_QUESTION_ADD_ANSWER\')}}</span>\n\t\t\t</div>\n\t\t\t<div class="vote-creation-form__question_multiple-answers">\n\t\t\t\t<span>{{loc(\'VOTE_QUESTION_MULTIPLE_ANSWERS\')}}</span>\n\t\t\t\t<div ref="multipleAnswersSwitcher"></div>\n\t\t\t</div>\n\t\t</div>\n\t'};function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={name:"voteForm",components:{Question:b},mixins:[u],props:{options:{type:Object,required:true}},data:function t(){return{questions:{},validatedQuestions:{}}},computed:{questionsCount:function t(){return Object.keys(this.questions).length},isFormValid:function t(){var e=Object.values(this.validatedQuestions);if(e.length===0){return false}return e.every((function(t){return t}))},canAddMoreQuestions:function t(){return this.questionsCount<this.options.maxQuestionsCount}},watch:{isFormValid:function t(){r.EventEmitter.emit("vote-creation-form-validate")}},created:function t(){this.questionIdCounter=1;this.answerIdCounter=1;this.settingsLabels={anonymousVote:this.loc("VOTE_SETTING_ANONYMOUS")};this.settings={anonymousVote:false};this.initQuestions()},mounted:function t(){var e=this;Object.keys(this.settingsLabels).forEach((function(t){var n=new i.Switcher({node:e.$refs[t][0],size:i.SwitcherSize.small,handlers:{toggled:function r(){e.settings=_(_({},e.settings),{},babelHelpers.defineProperty({},t,n.checked))}}})}))},methods:{initQuestions:function t(){var e=this.options,n=e.minQuestionsCount,r=e.minAnswersCount;var o=n*r;var i=1;var s="vote_question_".concat(this.questionIdCounter);for(var a=0;a<o;a++){if(i>r){i=1;s="vote_question_".concat(++this.questionIdCounter)}if(!this.questions[s]){this.validatedQuestions[s]=false;this.questions[s]={questionText:"",answers:{},allowMultipleAnswers:false}}var c="vote_answer_".concat(this.answerIdCounter++);this.questions[s].answers[c]="";i+=1}},addQuestion:function t(){var e={};var n=this.options.minAnswersCount;for(var r=0;r<n;r++){e["vote_answer_".concat(this.answerIdCounter++)]=""}var o="vote_question_".concat(++this.questionIdCounter);this.questions[o]={questionText:"",answers:e,allowMultipleAnswers:false};this.validatedQuestions[o]=false},addAnswer:function t(e){var n=this.questions[e];var r=n.answers;r["vote_answer_".concat(this.answerIdCounter++)]=""},removeAnswer:function t(e,n){var r=this.questions[e];delete r.answers[n]},changeQuestion:function t(e,n){this.questions[e]=n},validate:function t(e,n){this.validatedQuestions[e]=n}},template:'\n\t\t<div class="vote-creation-form">\n\t\t\t<div class="vote-creation-form__questions">\n\t\t\t\t<Question\n\t\t\t\t\tv-for="(question, id) in questions"\n\t\t\t\t\t:key="id"\n\t\t\t\t\t:id="id"\n\t\t\t\t\t:question="question"\n\t\t\t\t\t:maxAnswersCount="options.maxAnswersCount"\n\t\t\t\t\t:minAnswersCount="options.minAnswersCount"\n\t\t\t\t\t@addAnswer="addAnswer(id)"\n\t\t\t\t\t@removeAnswer="removeAnswer(id, $event)"\n\t\t\t\t\t@changeQuestion="changeQuestion(id, $event)"\n\t\t\t\t\t@validate="validate(id, $event)"\n\t\t\t\t></Question>\n\t\t\t\t<button\n\t\t\t\t\tv-if="canAddMoreQuestions"\n\t\t\t\t\tclass="ui-btn ui-btn-light-border ui-btn-sm ui-btn-no-caps ui-btn-round vote-creation-form__add-question-btn"\n\t\t\t\t\t@click="addQuestion"\n\t\t\t\t>\n\t\t\t\t\t{{loc(\'VOTE_ADD_QUESTION\')}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div class="vote-creation-form__settings">\n\t\t\t\t<p class="vote-creation-form__settings_title">\n\t\t\t\t\t{{loc(\'VOTE_SETTINGS_TITLE\')}}\n\t\t\t\t</p>\n\t\t\t\t<div\n\t\t\t\t\tv-for="(label, id) in settingsLabels"\n\t\t\t\t\tclass="vote-creation-form__settings_setting"\n\t\t\t\t>\n\t\t\t\t\t<span>{{label}}</span>\n\t\t\t\t\t<div :ref="id"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};var E=["containerId","chatId"];function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */T=function e(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function t(e,n,r){return e[n]=r}}function u(t,e,n,o){var i=e&&e.prototype instanceof f?e:f,s=Object.create(i.prototype),a=new x(o||[]);return r(s,"_invoke",{value:_(t,n,a)}),s}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d={};function f(){}function v(){}function h(){}var p={};c(p,i,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(S([])));w&&w!==e&&n.call(w,i)&&(p=w);var y=h.prototype=f.prototype=Object.create(p);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,i,s,a){var c=l(t[r],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==babelHelpers["typeof"](d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return o("throw",t,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function t(n,r){function s(){return new e((function(t,e){o(n,r,t,e)}))}return i=i?i.then(s,s):s()}})}function _(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=O(s,n);if(a){if(a===d)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=l(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(undefined===r)return e.delegate=null,"throw"===n&&t.iterator["return"]&&(e.method="return",e.arg=undefined,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var o=l(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,d;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,d):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function S(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=undefined,e.done=!0,e};return o.next=o}}return{next:j}}function j(){return{value:undefined,done:!0}}return v.prototype=h,r(y,"constructor",{value:h,configurable:!0}),r(h,"constructor",{value:v,configurable:!0}),v.displayName=c(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,s,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new g(u(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},b(y),c(y,a,"Generator"),c(y,i,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=S,x.prototype={constructor:x,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var r=this;function o(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=undefined),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return o("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),u=n.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return o(s.catchLoc,!0);if(this.prev<s.finallyLoc)return o(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return o(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return o(s.finallyLoc)}}}},abrupt:function t(e,r){for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=r&&r<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=r,s?(this.method="next",this.next=s.finallyLoc,d):this.complete(a)},complete:function t(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),d},finish:function t(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),A(r),d}},catch:function t(e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var i=o.arg;A(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function t(e,n,r){return this.delegate={iterator:S(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=undefined),d}},t}var S=10;var j=function t(e){return String(e*S+S)};var q=function t(e){var n=D.voteForm,r=n.questions,o=n.settings;var i=o.anonymousVote;var s={chatId:e,"IM_MESSAGE_VOTE_DATA[ANONYMITY]":i?"2":"1"};s["IM_MESSAGE_VOTE_DATA[OPTIONS][]"]="1";return Object.values(r).reduce((function(t,e,n){var r=e.questionText,o=e.allowMultipleAnswers,i=e.answers;var s="IM_MESSAGE_VOTE_DATA[QUESTIONS][".concat(n,"]");t["".concat(s,"[QUESTION]")]=r;t["".concat(s,"[C_SORT]")]=j(n);t["".concat(s,"[QUESTION_TYPE]")]="text";t["".concat(s,"[FIELD_TYPE]")]="0";if(o){t["".concat(s,"[FIELD_TYPE]")]="1"}Object.values(i).forEach((function(e,n){var r="".concat(s,"[ANSWERS][").concat(n,"]");t["".concat(r,"[MESSAGE]")]=e;t["".concat(r,"[MESSAGE_TYPE]")]="text";t["".concat(r,"[C_SORT]")]=String(n*10+10);t["".concat(r,"[FIELD_TYPE]")]="0"}));return t}),s)};var P=function(){var t=babelHelpers.asyncToGenerator(T().mark((function t(n,r){var i,s,a,c,u;return T().wrap((function t(l){while(1)switch(l.prev=l.next){case 0:i=q(r);l.prev=1;l.next=4;return o.ajax.runAction("bitrix:vote.Integration.Im.send",{data:i});case 4:BX.SidePanel.Instance.close();l.next=13;break;case 7:l.prev=7;l.t0=l["catch"](1);o.Dom.removeClass(n,"ui-btn-wait");a=(s=l.t0===null||l.t0===void 0?void 0:l.t0.errors)!==null&&s!==void 0?s:[];c=babelHelpers.slicedToArray(a,1),u=c[0];if(u){e.UI.Notification.Center.notify({content:u.message})}case 13:case"end":return l.stop()}}),t,null,[[1,7]])})));return function e(n,r){return t.apply(this,arguments)}}();var C=function t(e){o.Dom.toggleClass(e,"ui-btn-disabled")};var I=function t(e){var n=document.getElementById("vote-im-edit-slider-button-create");C(n);o.Event.bind(n,"click",(function(){return P(n,e)}));var i=function t(){return C(n)};r.EventEmitter.subscribe("vote-creation-form-validate",i);r.EventEmitter.subscribeOnce("SidePanel.Slider:onDestroy",(function(){r.EventEmitter.unsubscribe("vote-creation-form-validate",i)}))};var D=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"mount",value:function e(r){var i=r.containerId,s=r.chatId,a=babelHelpers.objectWithoutProperties(r,E);var c=document.getElementById(i);var u=n.BitrixVue.createApp(O,{options:x(x({},a),{},{minQuestionsCount:1})});t.voteForm=u.mount(c);o.ready((function(){return I(s)}))}}]);return t}();t.App=D})(this.BX.Vote.Component=this.BX.Vote.Component||{},BX,BX.Vue3,BX.Event,BX,BX.UI);
//# sourceMappingURL=vote-creation-form.bundle.map.js